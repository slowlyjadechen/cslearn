# 第一章 初识Linux shell

## 概述

Linux可划分为以下四部分：

- Linux内核
-  GNU工具
-  图形化桌面环境
- 应用软件

![Linux系统](E:\document\repository\Linuxshellbackup\Linux系统.png)

## Linux内核

Linux系统的核心是内核。内核控制着计算机系统上的所有硬件和软件，在必要时分配硬件，并根据需要执行软件。

内核主要负责以下四种功能：

- 系统内存管理
- 软件程序管理
- 硬件设备管理
- 文件系统管理

### 内存管理

内核不仅管理服务器上的可用物理内存，还可以创建和管理`虚拟内存`（即实际并不存在的内存）。<u>**内核通过硬盘上的存储空间来实现虚拟内存，这块区域称为`交换空间（swap space）`**</u><u>**。内核不断地在交换空间和实际的物理内存之间反复交换虚拟内存中的内容。这使得系统以为它拥有比物理内存更多的可用内存。**</u>

内存存储单元按组划分成很多块，这些块称作`页面`（page）。内核将每个内存页面放在物理内存或交换空间。然后，内核会维护一个`内存页面表`，指明哪些页面位于物理内存内，哪些页面被换到了磁盘上。

内核会记录哪些内存页面正在使用中，并自动把一段时间未访问的内存页面复制到交换空间区域（称为`换出`，swapping out）——即使还有可用内存。当程序要访问一个已被换出的内存页面时，内核必须从物理内存换出另外一个内存页面给它让出空间，然后从交换空间换入请求的内存页面。显然，这个过程要花费时间，拖慢运行中的进程。只要Linux系统在运行，为运行中的
程序换出内存页面的过程就不会停歇。

### 软件程序管理

<u>**Linux操作系统将运行中的程序称为`进程`**</u>

内核创建了第一个进程（称为`init进程`）来启动系统上所有其他进程。当内核启动时，它会将init进程加载到虚拟内存中。内核在启动任何其他进程时，都会在虚拟内存中给新进程分配一块专有区域来存储该进程用到的数据和代码

`运行级`（run level）

### 硬件设备管理

任何Linux系统需要与之通信的设备，都需要在内核代码中加入其`驱动程序代码`。<u>**驱动程序代码相当于应用程序和硬件设备的中间人，允许内核与设备之间交换数据。**</u>

Linux系统将硬件设备当成特殊的文件，称为`设备文件`。设备文件有3种分类：

- 字符型设备文件
- 块设备文件
- 网络设备文件

Linux为系统上的每个设备都创建一种称为`节点`的特殊文件。<u>**与设备的所有通信都通过设备节点完成。每个节点都有唯一的数值对供Linux内核标识它。数值对包括一个主设备号和一个次设备号。类似的设备被划分到同样的主设备号下。次设备号用于标识主设备组下的某个特定设备。**</u>

> linux文件系统
>
> ![Linux文件系统](E:\document\repository\Linuxshellbackup\Linux文件系统.png)

Linux内核采用`虚拟文件系统`（Virtual File System，VFS）作为和每个文件系统交互的接口。这为Linux内核同任何类型文件系统通信提供了一个标准接口。当每个文件系统都被挂载和使用时，VFS将信息都缓存在内存中。

## GNU 工具

除了由内核控制硬件设备外，操作系统还需要工具来<u>**执行一些标准功能，比如控制文件和程序。**</u>

- 核心GNU工具(GNU coreutils)

  GNU coreutils软件包由三部分构成：

  - 用以处理文件的工具
  - 用以操作文本的工具
  - 用以管理进程的工具

- shell
  - GNU/Linux shell是一种特殊的交互式工具。它为用户提供了启动程序、管理文件系统中的文
    件以及运行在Linux系统上的进程的途径。
  - <u>**shell的核心是命令行提示符**</u>。命令行提示符是shell负责交互的部分。它允许你输入文本命令，然后解释命令，并在内核中执行。

## Linux 桌面环境

- X Window系统
  - X Window软件是图形显示的核心部分。
  - X Window软件是直接和PC上的显卡及显示器打交道的底层程序

- GNOME桌面
  - 现已成为许多Linux发行版默认的桌面环境（用得最多的是Red Hat Linux）

- 其他

## Linux 发行版

完整的Linux系统包称为发行版